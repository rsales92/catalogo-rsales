<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSales Lavacar - Cat√°logo de Servi√ßos</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-red: #dc3545;
            --dark-red: #c82333;
            --light-grey: #f8f9fa;
            --medium-grey: #e9ecef;
            --dark-grey: #343a40;
            --black: #212529;
            --white: #ffffff;
            --blue-light: #e6f7ff;
            --blue-dark: #007bff;
            --green: #28a745;
            --dark-green: #1e7e34;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-grey);
            color: var(--black);
            line-height: 1.6;
            padding-bottom: 70px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
            box-sizing: border-box;
        }
        header {
            background-color: var(--black);
            color: var(--white);
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        header h1 {
            margin: 0;
            font-size: 2.2em;
            font-weight: 700;
            color: var(--primary-red);
        }
        main {
            padding: 40px 0;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        h2 { color: var(--black); text-align: center; margin-bottom: 20px; font-weight: 700; }
        .info-text { text-align: center; margin-bottom: 30px; font-size: 1.1em; color: var(--dark-grey); padding: 10px 0; border-bottom: 1px solid var(--medium-grey); }
        
        .button-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 30px; }
        .car-type-btn, .back-button { 
            background-color: var(--primary-red); color: var(--white); border: none; padding: 12px 25px; 
            font-size: 16px; border-radius: 5px; cursor: pointer; transition: 0.3s; font-weight: 600; 
        }
        .car-type-btn:hover { background-color: var(--dark-red); transform: translateY(-2px); }

        /* Servi√ßos */
        .service-item { 
            background-color: var(--light-grey); border: 1px solid var(--medium-grey); 
            border-radius: 5px; padding: 15px; margin-bottom: 15px; display: flex; gap: 15px; transition: 0.3s;
        }
        .service-item.selected { background-color: var(--blue-light); border: 2px solid var(--primary-red); }
        .service-item input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--primary-red); cursor: pointer; }
        .service-details h4 { color: var(--primary-red); margin: 0 0 5px 0; }
        .price { font-weight: bold; font-size: 1.1em; display: block; margin-top: 5px; }

        /* Carrinho Flutuante */
        .floating-cart-wrapper { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        #floating-cart-icon {
            background-color: var(--white); color: var(--primary-red); border: 2px solid var(--primary-red);
            width: 60px; height: 60px; border-radius: 50%; font-size: 28px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; position: relative; box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #cart-count {
            position: absolute; top: -5px; right: -5px; background: var(--green);
            color: white; width: 22px; height: 22px; border-radius: 50%; font-size: 12px;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }

        /* Modal do Carrinho */
        .cart-modal-overlay {
            display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); justify-content: center; align-items: center;
        }
        .cart-modal-overlay.active { display: flex; }
        #cart-summary {
            background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 400px;
            position: relative; border-top: 5px solid var(--primary-red);
        }
        #cart-items { list-style: none; padding: 0; max-height: 300px; overflow-y: auto; }
        #cart-items li { 
            display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--medium-grey); 
            font-size: 0.9em;
        }
        .remove-item-btn { background: none; border: none; color: var(--primary-red); cursor: pointer; font-weight: bold; }
        #cart-total-display { font-size: 1.3em; font-weight: bold; text-align: right; margin: 15px 0; border-top: 2px solid var(--black); padding-top: 10px; }
        .checkout-button { background: var(--green); color: white; border: none; width: 100%; padding: 12px; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; }
    </style>
</head>
<body>

<header>
    <div class="container">
        <h1>RSales Lavacar</h1>
    </div>
</header>

<main class="container">
    <section id="car-selection">
        <p class="info-text">Selecione a categoria do seu ve√≠culo:</p>
        <div class="button-group">
            <button class="car-type-btn" data-car="SUV">SUV</button>
            <button class="car-type-btn" data-car="Hatch">Hatch</button>
            <button class="car-type-btn" data-car="Sed√£">Sed√£</button>
            <button class="car-type-btn" data-car="Picape">Picape</button>
        </div>
        <div style="text-align:center">
            <img src="logo.jpeg" alt="Logo" style="max-width: 300px; border-radius: 10px;">
        </div>
    </section>

    <section id="services-display" style="display: none;">
        <h2 id="car-type-title"></h2>
        <div id="services-content"></div>
        <button id="back-to-selection" class="back-button" style="margin-top: 20px; width: 100%;">Voltar</button>
    </section>
</main>

<div id="cart-modal" class="cart-modal-overlay">
    <div id="cart-summary">
        <span class="close-modal">&times;</span>
        <h3>üõí Meu Pedido</h3>
        <ul id="cart-items"></ul>
        <div id="cart-total-display">Total: R$ 0,00</div>
        <button id="checkout-btn" class="checkout-button">Agendar via WhatsApp</button>
    </div>
</div>

<div class="floating-cart-wrapper">
    <div id="floating-cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span id="cart-count">0</span>
    </div>
</div>

<script>
    const carData = {
        "SUV": [
            {"name": "Lavagem Express", "price": "R$ 90,00"},
            {"name": "Lavagem Completa", "price": "R$ 115,00"},
            {"name": "Lavagem Detalhada + Cera", "price": "R$ 150,00"},
            {"name": "Hidrata√ß√£o de Couro", "price": "R$ 150,00"},
            {"name": "Lavagem de Motor", "price": "R$ 250,00"}
        ],
        "Hatch": [
            {"name": "Lavagem Express", "price": "R$ 65,00"},
            {"name": "Lavagem Completa", "price": "R$ 85,00"},
            {"name": "Lavagem Detalhada + Cera", "price": "R$ 120,00"}
        ],
        "Sed√£": [
            {"name": "Lavagem Express", "price": "R$ 75,00"},
            {"name": "Lavagem Completa", "price": "R$ 95,00"},
            {"name": "Lavagem Detalhada + Cera", "price": "R$ 130,00"}
        ],
        "Picape": [
            {"name": "Lavagem Express", "price": "R$ 100,00"},
            {"name": "Lavagem Completa", "price": "R$ 130,00"},
            {"name": "Lavagem Detalhada + Cera", "price": "R$ 170,00"}
        ]
    };

    let cart = [];
    let currentCar = "";

    const carSelection = document.getElementById('car-selection');
    const servicesDisplay = document.getElementById('services-display');
    const servicesContent = document.getElementById('services-content');
    const carTypeTitle = document.getElementById('car-type-title');
    const cartCount = document.getElementById('cart-count');
    const cartModal = document.getElementById('cart-modal');

    // Navega√ß√£o: Escolher carro
    document.querySelectorAll('.car-type-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            currentCar = btn.getAttribute('data-car');
            carTypeTitle.innerText = "Servi√ßos para " + currentCar;
            renderServices();
            carSelection.style.display = 'none';
            servicesDisplay.style.display = 'block';
        });
    });

    // Voltar
    document.getElementById('back-to-selection').addEventListener('click', () => {
        carSelection.style.display = 'block';
        servicesDisplay.style.display = 'none';
    });

    // Renderizar lista de servi√ßos
    function renderServices() {
        servicesContent.innerHTML = '';
        carData[currentCar].forEach((svc, index) => {
            const isSelected = cart.some(item => item.name === svc.name && item.car === currentCar);
            const div = document.createElement('div');
            div.className = `service-item ${isSelected ? 'selected' : ''}`;
            div.innerHTML = `
                <input type="checkbox" ${isSelected ? 'checked' : ''} onchange="toggleService('${svc.name}', '${svc.price}')">
                <div class="service-details">
                    <h4>${svc.name}</h4>
                    <span class="price">${svc.price}</span>
                </div>
            `;
            servicesContent.appendChild(div);
        });
    }

    // Adicionar/Remover do carrinho
    window.toggleService = (name, price) => {
        const index = cart.findIndex(item => item.name === name && item.car === currentCar);
        if (index > -1) {
            cart.splice(index, 1);
        } else {
            cart.push({ name, price, car: currentCar });
        }
        updateCart();
        renderServices();
    };

    function updateCart() {
        cartCount.innerText = cart.length;
        const list = document.getElementById('cart-items');
        const totalDisplay = document.getElementById('cart-total-display');
        list.innerHTML = '';
        let total = 0;

        cart.forEach((item, i) => {
            const val = parseFloat(item.price.replace('R$', '').replace(',', '.'));
            total += val;
            list.innerHTML += `<li><span>${item.name} (${item.car})</span> <span>${item.price} <button class="remove-item-btn" onclick="removeAt(${i})">&times;</button></span></li>`;
        });

        totalDisplay.innerText = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
    }

    window.removeAt = (i) => {
        cart.splice(i, 1);
        updateCart();
        renderServices();
    };

    // Modal
    document.getElementById('floating-cart-icon').onclick = () => cartModal.classList.add('active');
    document.querySelector('.close-modal').onclick = () => cartModal.classList.remove('active');

    // Checkout WhatsApp
    document.getElementById('checkout-btn').onclick = () => {
        if (cart.length === 0) return alert("Selecione ao menos um servi√ßo!");
        let msg = "*Novo Agendamento - RSales Lavacar*\n\n";
        cart.forEach(item => msg += `‚Ä¢ ${item.name} (${item.car}): ${item.price}\n`);
        const total = document.getElementById('cart-total-display').innerText;
        msg += `\n*${total}*`;
        window.open(`https://wa.me/5544997063542?text=${encodeURIComponent(msg)}`);
    };
</script>

</body>
</html>
